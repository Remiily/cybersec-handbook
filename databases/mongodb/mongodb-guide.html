<!DOCTYPE html>
<html lang="es" x-data="app" x-init="init()" :class="{ 'dark': darkMode }">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu√≠a de MongoDB - CyberSec Handbook</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="../../assets/css/main.css">
    <script>tailwind.config = { darkMode: 'class' }</script>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100">
    <header class="sticky top-0 z-30 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-4">
                    <button @click="toggleSidebar()" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 lg:hidden sidebar-toggle">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                    <a href="https://remiily.github.io/cybersec-handbook/index.html" class="flex items-center gap-2">
                        <h1 class="text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">üõ°Ô∏è CyberSec Handbook</h1>
                    </a>
                </div>
                <button @click="toggleDarkMode()" class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800">
                    <svg x-show="!darkMode" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                    </svg>
                    <svg x-show="darkMode" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                </button>
            </div>
        </div>
    </header>
    <div x-show="sidebarOpen" @click="closeSidebar()" class="sidebar-overlay" x-cloak></div>
    <div class="flex relative">
                        <aside :class="sidebarOpen ? 'open' : ''" class="sidebar">
            <nav class="p-4 space-y-2">
                <!-- Navigation will be generated by navigation.js -->
            </nav>
        </aside>
        <main class="flex-1 min-h-screen lg:ml-64">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <article>
                    <header class="mb-8">
                        <h1 class="text-4xl font-bold mb-4">Gu√≠a Completa de MongoDB</h1>
                        <p class="text-xl text-gray-600 dark:text-gray-400 mb-4">Base de datos NoSQL orientada a documentos</p>
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span class="badge badge-intermediate">Nivel: Intermedio</span>
                            <span class="badge">üçÉ MongoDB 6.0+</span>
                        </div>
                    </header>
                    <div id="table-of-contents" class="toc"></div>
                    <div class="prose prose-lg dark:prose-invert max-w-none">
                        <h2 id="instalacion">Instalaci√≥n</h2>
                        <div class="command-block mb-4" x-data="copyCommand">
                            <button @click="copy('# Ubuntu/Debian\nwget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -\necho \"deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/6.0 multiverse\" | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list\nsudo apt-get update\nsudo apt-get install -y mongodb-org\n\n# Iniciar MongoDB\nsudo systemctl start mongod\nsudo systemctl enable mongod\n\n# Verificar estado\nsudo systemctl status mongod')" class="copy-btn" :class="{ 'copied': copied }">
                                <svg x-show="!copied" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                                <svg x-show="copied" class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <pre><code># Ubuntu/Debian
wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/6.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list
sudo apt-get update
sudo apt-get install -y mongodb-org

# Iniciar MongoDB
sudo systemctl start mongod
sudo systemctl enable mongod

# Verificar estado
sudo systemctl status mongod</code></pre>
                        </div>

                        <h2 id="comandos-basicos">Comandos B√°sicos</h2>
                        <div class="command-block mb-4" x-data="copyCommand">
                            <button @click="copy('# Conectar a MongoDB\nmongosh\n\n# Comandos b√°sicos\nshow dbs                    # Listar bases de datos\nuse nombre_base            # Usar/crear base de datos\ndb                          # Ver base actual\nshow collections           # Listar colecciones\n\n# Crear colecci√≥n\ndb.createCollection(\"usuarios\")\n\n# Insertar documento\ndb.usuarios.insertOne({nombre: \"Juan\", edad: 30})\ndb.usuarios.insertMany([{nombre: \"Ana\"}, {nombre: \"Pedro\"}])\n\n# Consultar\ndb.usuarios.find()\ndb.usuarios.findOne({nombre: \"Juan\"})\ndb.usuarios.find({edad: {$gt: 25}})\n\n# Actualizar\ndb.usuarios.updateOne({nombre: \"Juan\"}, {$set: {edad: 31}})\n\n# Eliminar\ndb.usuarios.deleteOne({nombre: \"Juan\"})\ndb.usuarios.deleteMany({edad: {$lt: 18}})')" class="copy-btn" :class="{ 'copied': copied }">
                                <svg x-show="!copied" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                                <svg x-show="copied" class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <pre><code># Conectar a MongoDB
mongosh

# Comandos b√°sicos
show dbs                    # Listar bases de datos
use nombre_base            # Usar/crear base de datos
db                          # Ver base actual
show collections           # Listar colecciones

# Crear colecci√≥n
db.createCollection("usuarios")

# Insertar documento
db.usuarios.insertOne({nombre: "Juan", edad: 30})
db.usuarios.insertMany([{nombre: "Ana"}, {nombre: "Pedro"}])

# Consultar
db.usuarios.find()
db.usuarios.findOne({nombre: "Juan"})
db.usuarios.find({edad: {$gt: 25}})

# Actualizar
db.usuarios.updateOne({nombre: "Juan"}, {$set: {edad: 31}})

# Eliminar
db.usuarios.deleteOne({nombre: "Juan"})
db.usuarios.deleteMany({edad: {$lt: 18}})</code></pre>
                        </div>

                        <h2 id="seguridad-mongodb">Seguridad de MongoDB</h2>
                        <p>MongoDB requiere configuraci√≥n de seguridad adecuada para proteger datos sensibles en producci√≥n.</p>

                        <h3 id="autenticacion">Autenticaci√≥n</h3>
                        <div class="command-block mb-4" x-data="copyCommand">
                            <button @click="copy('# Crear usuario administrador\nuse admin\ndb.createUser({\n  user: \"admin\",\n  pwd: \"contrase√±a_segura\",\n  roles: [\"root\"]\n})\n\n# Crear usuario con roles espec√≠ficos\nuse appdb\ndb.createUser({\n  user: \"appuser\",\n  pwd: \"contrase√±a_segura\",\n  roles: [\n    { role: \"readWrite\", db: \"appdb\" },\n    { role: \"read\", db: \"reporting\" }\n  ]\n})\n\n# Habilitar autenticaci√≥n en mongod.conf\n# security:\n#   authorization: enabled\n\n# Reiniciar MongoDB\nsudo systemctl restart mongod\n\n# Conectar con autenticaci√≥n\nmongosh -u admin -p contrase√±a_segura --authenticationDatabase admin')" class="copy-btn" :class="{ 'copied': copied }">
                                <svg x-show="!copied" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                                <svg x-show="copied" class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <pre><code># Crear usuario administrador
use admin
db.createUser({
  user: "admin",
  pwd: "contrase√±a_segura",
  roles: ["root"]
})

# Crear usuario con roles espec√≠ficos
use appdb
db.createUser({
  user: "appuser",
  pwd: "contrase√±a_segura",
  roles: [
    { role: "readWrite", db: "appdb" },
    { role: "read", db: "reporting" }
  ]
})

# Habilitar autenticaci√≥n en mongod.conf
# security:
#   authorization: enabled

# Reiniciar MongoDB
sudo systemctl restart mongod

# Conectar con autenticaci√≥n
mongosh -u admin -p contrase√±a_segura --authenticationDatabase admin</code></pre>
                        </div>

                        <h3 id="roles-mongodb">Roles y Permisos</h3>
                        <div class="overflow-x-auto mb-6">
                            <table>
                                <thead>
                                    <tr><th>Rol</th><th>Permisos</th><th>Uso</th></tr>
                                </thead>
                                <tbody>
                                    <tr><td>read</td><td>Lectura en base de datos</td><td>Usuarios de solo lectura</td></tr>
                                    <tr><td>readWrite</td><td>Lectura y escritura</td><td>Aplicaciones</td></tr>
                                    <tr><td>dbAdmin</td><td>Administraci√≥n de base de datos</td><td>Administradores de DB</td></tr>
                                    <tr><td>userAdmin</td><td>Gesti√≥n de usuarios</td><td>Administradores de usuarios</td></tr>
                                    <tr><td>clusterAdmin</td><td>Administraci√≥n de cluster</td><td>Administradores de infraestructura</td></tr>
                                    <tr><td>root</td><td>Todos los permisos</td><td>Superusuario</td></tr>
                                </tbody>
                            </table>
                        </div>

                        <h3 id="cifrado">Cifrado</h3>
                        <div class="command-block mb-4" x-data="copyCommand">
                            <button @click="copy('# Cifrado en tr√°nsito (TLS/SSL)\n# Generar certificado\nopenssl req -newkey rsa:2048 -days 365 -nodes -x509 -keyout mongodb-key.pem -out mongodb-cert.pem\n\n# Configurar en mongod.conf\n# net:\n#   ssl:\n#     mode: requireSSL\n#     PEMKeyFile: /etc/ssl/mongodb-cert.pem\n#     CAFile: /etc/ssl/ca.pem\n\n# Cifrado en reposo (WiredTiger Encryption)\n# Requiere MongoDB Enterprise\n# storage:\n#   wiredTiger:\n#     encryptionKeyFile: /etc/mongodb/keyfile\n\n# Conectar con TLS\nmongosh --tls --host mongodb.example.com --tlsCAFile /path/to/ca.pem')" class="copy-btn" :class="{ 'copied': copied }">
                                <svg x-show="!copied" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                                <svg x-show="copied" class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <pre><code># Cifrado en tr√°nsito (TLS/SSL)
# Generar certificado
openssl req -newkey rsa:2048 -days 365 -nodes -x509 -keyout mongodb-key.pem -out mongodb-cert.pem

# Configurar en mongod.conf
# net:
#   ssl:
#     mode: requireSSL
#     PEMKeyFile: /etc/ssl/mongodb-cert.pem
#     CAFile: /etc/ssl/ca.pem

# Cifrado en reposo (WiredTiger Encryption)
# Requiere MongoDB Enterprise
# storage:
#   wiredTiger:
#     encryptionKeyFile: /etc/mongodb/keyfile

# Conectar con TLS
mongosh --tls --host mongodb.example.com --tlsCAFile /path/to/ca.pem</code></pre>
                        </div>

                        <h3 id="network-security">Seguridad de Red</h3>
                        <div class="command-block mb-4" x-data="copyCommand">
                            <button @click="copy('# Configurar bindIp en mongod.conf\n# net:\n#   bindIp: 127.0.0.1,10.0.0.100  # Solo IPs espec√≠ficas\n#   port: 27017\n\n# Firewall: Permitir solo IPs espec√≠ficas\nsudo ufw allow from 10.0.0.0/24 to any port 27017\n\n# Deshabilitar acceso p√∫blico\n# net:\n#   bindIp: 127.0.0.1  # Solo localhost\n\n# Verificar conexiones\nnetstat -tulpn | grep mongod\nss -tulpn | grep mongod')" class="copy-btn" :class="{ 'copied': copied }">
                                <svg x-show="!copied" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                                <svg x-show="copied" class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <pre><code># Configurar bindIp en mongod.conf
# net:
#   bindIp: 127.0.0.1,10.0.0.100  # Solo IPs espec√≠ficas
#   port: 27017

# Firewall: Permitir solo IPs espec√≠ficas
sudo ufw allow from 10.0.0.0/24 to any port 27017

# Deshabilitar acceso p√∫blico
# net:
#   bindIp: 127.0.0.1  # Solo localhost

# Verificar conexiones
netstat -tulpn | grep mongod
ss -tulpn | grep mongod</code></pre>
                        </div>

                        <h2 id="queries-avanzadas">Queries Avanzadas</h2>

                        <h3 id="aggregation">Aggregation Pipeline</h3>
                        <div class="command-block mb-4" x-data="copyCommand">
                            <button @click="copy('# Ejemplo de aggregation pipeline\ndb.ventas.aggregate([\n  { $match: { fecha: { $gte: ISODate(\"2026-01-01\") } } },\n  { $group: { _id: \"$categoria\", total: { $sum: \"$monto\" } } },\n  { $sort: { total: -1 } },\n  { $limit: 10 }\n])\n\n# Lookup (join)\ndb.ordenes.aggregate([\n  { $lookup: {\n      from: \"productos\",\n      localField: \"producto_id\",\n      foreignField: \"_id\",\n      as: \"producto\"\n    }\n  }\n])')" class="copy-btn" :class="{ 'copied': copied }">
                                <svg x-show="!copied" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                                <svg x-show="copied" class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <pre><code># Ejemplo de aggregation pipeline
db.ventas.aggregate([
  { $match: { fecha: { $gte: ISODate("2026-01-01") } } },
  { $group: { _id: "$categoria", total: { $sum: "$monto" } } },
  { $sort: { total: -1 } },
  { $limit: 10 }
])

# Lookup (join)
db.ordenes.aggregate([
  { $lookup: {
      from: "productos",
      localField: "producto_id",
      foreignField: "_id",
      as: "producto"
    }
  }
])</code></pre>
                        </div>

                        <h3 id="indexes">√çndices</h3>
                        <div class="command-block mb-4" x-data="copyCommand">
                            <button @click="copy('# Crear √≠ndice simple\ndb.usuarios.createIndex({ email: 1 })\n\n# Crear √≠ndice compuesto\ndb.usuarios.createIndex({ nombre: 1, apellido: 1 })\n\n# Crear √≠ndice √∫nico\ndb.usuarios.createIndex({ email: 1 }, { unique: true })\n\n# Crear √≠ndice TTL (expira documentos)\ndb.sesiones.createIndex({ fecha_creacion: 1 }, { expireAfterSeconds: 3600 })\n\n# Listar √≠ndices\ndb.usuarios.getIndexes()\n\n# Eliminar √≠ndice\ndb.usuarios.dropIndex({ email: 1 })\n\n# Analizar query (explain)\ndb.usuarios.find({ email: \"test@example.com\" }).explain(\"executionStats\")')" class="copy-btn" :class="{ 'copied': copied }">
                                <svg x-show="!copied" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                                <svg x-show="copied" class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <pre><code># Crear √≠ndice simple
db.usuarios.createIndex({ email: 1 })

# Crear √≠ndice compuesto
db.usuarios.createIndex({ nombre: 1, apellido: 1 })

# Crear √≠ndice √∫nico
db.usuarios.createIndex({ email: 1 }, { unique: true })

# Crear √≠ndice TTL (expira documentos)
db.sesiones.createIndex({ fecha_creacion: 1 }, { expireAfterSeconds: 3600 })

# Listar √≠ndices
db.usuarios.getIndexes()

# Eliminar √≠ndice
db.usuarios.dropIndex({ email: 1 })

# Analizar query (explain)
db.usuarios.find({ email: "test@example.com" }).explain("executionStats")</code></pre>
                        </div>

                        <h2 id="backup-restore">Backup y Restore</h2>
                        <div class="command-block mb-4" x-data="copyCommand">
                            <button @click="copy('# Backup completo\nmongodump --out /backup/mongodb\n\n# Backup de base espec√≠fica\nmongodump --db nombre_base --out /backup/mongodb\n\n# Backup con autenticaci√≥n\nmongodump --host localhost:27017 --username usuario --password contrase√±a --out /backup\n\n# Backup con compresi√≥n\nmongodump --out /backup/mongodb --gzip\n\n# Backup remoto\nmongodump --host mongodb.example.com:27017 --username admin --password contrase√±a --out /backup\n\n# Restore\nmongorestore /backup/mongodb\n\n# Restore base espec√≠fica\nmongorestore --db nombre_base /backup/mongodb/nombre_base\n\n# Restore con autenticaci√≥n\nmongorestore --host localhost:27017 --username admin --password contrase√±a /backup/mongodb\n\n# Backup incremental (oplog)\nmongodump --oplog --out /backup/mongodb')" class="copy-btn" :class="{ 'copied': copied }">
                                <svg x-show="!copied" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                                <svg x-show="copied" class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <pre><code># Backup completo
mongodump --out /backup/mongodb

# Backup de base espec√≠fica
mongodump --db nombre_base --out /backup/mongodb

# Backup con autenticaci√≥n
mongodump --host localhost:27017 --username usuario --password contrase√±a --out /backup

# Backup con compresi√≥n
mongodump --out /backup/mongodb --gzip

# Backup remoto
mongodump --host mongodb.example.com:27017 --username admin --password contrase√±a --out /backup

# Restore
mongorestore /backup/mongodb

# Restore base espec√≠fica
mongorestore --db nombre_base /backup/mongodb/nombre_base

# Restore con autenticaci√≥n
mongorestore --host localhost:27017 --username admin --password contrase√±a /backup/mongodb

# Backup incremental (oplog)
mongodump --oplog --out /backup/mongodb</code></pre>
                        </div>

                        <h2 id="monitoreo">Monitoreo y Mantenimiento</h2>

                        <h3 id="estadisticas">Estad√≠sticas del Sistema</h3>
                        <div class="command-block mb-4" x-data="copyCommand">
                            <button @click="copy('# Estad√≠sticas del servidor\ndb.serverStatus()\n\n# Estad√≠sticas de base de datos\ndb.stats()\n\n# Estad√≠sticas de colecci√≥n\ndb.usuarios.stats()\n\n# Informaci√≥n de conexiones activas\ndb.currentOp()\n\n# Listar procesos lentos\ndb.currentOp({\"active\": true, \"secs_running\": {\"$gt\": 5}})\n\n# Matar operaci√≥n\n# db.killOp(opid)\n\n# Informaci√≥n de r√©plicas (si aplica)\nrs.status()\nrs.printReplicationInfo()')" class="copy-btn" :class="{ 'copied': copied }">
                                <svg x-show="!copied" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                                <svg x-show="copied" class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <pre><code># Estad√≠sticas del servidor
db.serverStatus()

# Estad√≠sticas de base de datos
db.stats()

# Estad√≠sticas de colecci√≥n
db.usuarios.stats()

# Informaci√≥n de conexiones activas
db.currentOp()

# Listar procesos lentos
db.currentOp({"active": true, "secs_running": {"$gt": 5}})

# Matar operaci√≥n
# db.killOp(opid)

# Informaci√≥n de r√©plicas (si aplica)
rs.status()
rs.printReplicationInfo()</code></pre>
                        </div>

                        <h3 id="validacion">Validaci√≥n y Reparaci√≥n</h3>
                        <div class="command-block mb-4" x-data="copyCommand">
                            <button @click="copy('# Validar colecci√≥n\ndb.usuarios.validate()\n\n# Validar con opciones\ndb.usuarios.validate({ full: true })\n\n# Reparar base de datos (solo si es necesario)\n# mongod --repair\n\n# Compactar colecci√≥n (reduce espacio)\ndb.runCommand({ compact: \"usuarios\" })\n\n# Reconstruir √≠ndices\ndb.usuarios.reIndex()')" class="copy-btn" :class="{ 'copied': copied }">
                                <svg x-show="!copied" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                                <svg x-show="copied" class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <pre><code># Validar colecci√≥n
db.usuarios.validate()

# Validar con opciones
db.usuarios.validate({ full: true })

# Reparar base de datos (solo si es necesario)
# mongod --repair

# Compactar colecci√≥n (reduce espacio)
db.runCommand({ compact: "usuarios" })

# Reconstruir √≠ndices
db.usuarios.reIndex()</code></pre>
                        </div>

                        <h2 id="replicacion">R√©plicas y Sharding</h2>

                        <h3 id="replica-set">Replica Set</h3>
                        <div class="command-block mb-4" x-data="copyCommand">
                            <button @click="copy('# Inicializar replica set\nrs.initiate({\n  _id: \"rs0\",\n  members: [\n    { _id: 0, host: \"mongodb1:27017\" },\n    { _id: 1, host: \"mongodb2:27017\" },\n    { _id: 2, host: \"mongodb3:27017\", arbiterOnly: true }\n  ]\n})\n\n# Agregar miembro\nrs.add(\"mongodb4:27017\")\n\n# Remover miembro\nrs.remove(\"mongodb4:27017\")\n\n# Estado del replica set\nrs.status()\n\n# Configuraci√≥n\nrs.conf()')" class="copy-btn" :class="{ 'copied': copied }">
                                <svg x-show="!copied" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                                <svg x-show="copied" class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" x-cloak>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </button>
                            <pre><code># Inicializar replica set
rs.initiate({
  _id: "rs0",
  members: [
    { _id: 0, host: "mongodb1:27017" },
    { _id: 1, host: "mongodb2:27017" },
    { _id: 2, host: "mongodb3:27017", arbiterOnly: true }
  ]
})

# Agregar miembro
rs.add("mongodb4:27017")

# Remover miembro
rs.remove("mongodb4:27017")

# Estado del replica set
rs.status()

# Configuraci√≥n
rs.conf()</code></pre>
                        </div>

                        <h2 id="checklist-mongodb">Checklist de Seguridad MongoDB</h2>
                        <div class="checklist-container mb-6">
                            <div class="checklist" data-checklist-id="mongodb-security">
                                <div class="checklist-item">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" onchange="handleChecklistChange('mongodb-security', 0)" class="checklist-checkbox">
                                        <span>Autenticaci√≥n habilitada en producci√≥n</span>
                                    </label>
                                </div>
                                <div class="checklist-item">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" onchange="handleChecklistChange('mongodb-security', 1)" class="checklist-checkbox">
                                        <span>Usuarios creados con principio de menor privilegio</span>
                                    </label>
                                </div>
                                <div class="checklist-item">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" onchange="handleChecklistChange('mongodb-security', 2)" class="checklist-checkbox">
                                        <span>TLS/SSL configurado para cifrado en tr√°nsito</span>
                                    </label>
                                </div>
                                <div class="checklist-item">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" onchange="handleChecklistChange('mongodb-security', 3)" class="checklist-checkbox">
                                        <span>bindIp configurado para limitar acceso de red</span>
                                    </label>
                                </div>
                                <div class="checklist-item">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" onchange="handleChecklistChange('mongodb-security', 4)" class="checklist-checkbox">
                                        <span>Firewall configurado para restringir acceso</span>
                                    </label>
                                </div>
                                <div class="checklist-item">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" onchange="handleChecklistChange('mongodb-security', 5)" class="checklist-checkbox">
                                        <span>Backups regulares configurados y probados</span>
                                    </label>
                                </div>
                                <div class="checklist-item">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" onchange="handleChecklistChange('mongodb-security', 6)" class="checklist-checkbox">
                                        <span>√çndices creados para optimizar queries</span>
                                    </label>
                                </div>
                                <div class="checklist-item">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" onchange="handleChecklistChange('mongodb-security', 7)" class="checklist-checkbox">
                                        <span>Monitoreo y alertas configuradas</span>
                                    </label>
                                </div>
                            </div>
                            <div class="checklist-progress mt-4">
                                <div class="progress-bar">
                                    <div class="progress-fill" data-progress="mongodb-security"></div>
                                </div>
                                <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">Progreso: <span data-progress-text="mongodb-security">0%</span></p>
                            </div>
                        </div>

                        <h2 id="recursos-adicionales">Recursos Adicionales</h2>
                        <ul>
                            <li><strong>MongoDB Documentation:</strong> <a href="https://docs.mongodb.com" class="text-blue-600 dark:text-blue-400">docs.mongodb.com</a></li>
                            <li><strong>MongoDB Security Checklist:</strong> <a href="https://docs.mongodb.com/manual/administration/security-checklist/" class="text-blue-600 dark:text-blue-400">docs.mongodb.com</a></li>
                            <li><strong>MongoDB University:</strong> <a href="https://university.mongodb.com" class="text-blue-600 dark:text-blue-400">university.mongodb.com</a></li>
                        </ul>

                        <div class="alert alert-success mt-8">
                            <p class="font-semibold mb-2">‚úÖ MongoDB</p>
                            <p>MongoDB es una base de datos NoSQL orientada a documentos. Ideal para aplicaciones que requieren flexibilidad en el esquema y escalabilidad horizontal. Usa JSON-like documents (BSON) para almacenar datos. En producci√≥n, siempre habilita autenticaci√≥n, cifrado en tr√°nsito, y limita el acceso de red.</p>
                        </div>
                    </div>
                </article>
            </div>
        </main>
    </div>
        <footer class="bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-6">
                <div>
                    <h3 class="text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3">CyberSec Handbook</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
                        Gu√≠a profesional y completa de ciberseguridad para profesionales de todos los niveles.
                    </p>
                    <p class="text-xs text-gray-500 dark:text-gray-500">
                        ¬© 2026 CyberSec Handbook. Todos los derechos reservados.
                    </p>
                </div>
                <div>
                    <h3 class="text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3">Recursos</h3>
                    <ul class="space-y-2">
                        <li>
                            <a href="https://github.com/remiily/cybersec-handbook" target="_blank" rel="noopener noreferrer" class="text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                                </svg>
                                GitHub
                            </a>
                        </li>
                        <li>
                            <a href="https://remiily.github.io/cybersec-handbook" target="_blank" rel="noopener noreferrer" class="text-sm text-blue-600 dark:text-blue-400 hover:underline">
                                Sitio Web
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/remiily/cybersec-handbook/issues" target="_blank" rel="noopener noreferrer" class="text-sm text-blue-600 dark:text-blue-400 hover:underline">
                                Reportar Issue
                            </a>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3">Desarrollado por</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                        <a href="https://github.com/remiily" target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:underline">
                            @remiily
                        </a>
                    </p>
                    <p class="text-xs text-gray-500 dark:text-gray-500">
                        Recurso educativo de c√≥digo abierto bajo licencia MIT
                    </p>
                </div>
            </div>
            <div class="border-t border-gray-200 dark:border-gray-700 pt-6">
                <p class="text-xs text-center text-gray-500 dark:text-gray-500">
                    Este handbook es un recurso educativo. Las t√©cnicas y herramientas descritas deben usarse √∫nicamente en entornos autorizados y de acuerdo con las leyes aplicables.
                </p>
            </div>
        </div>
    </footer>
    <script src="../../assets/js/navigation.js"></script>
    <script src="../../assets/js/search.js"></script>
    <script src="../../assets/js/main.js"></script>
    <style>[x-cloak] { display: none !important; }</style>
    <script>
        // Inicializar navegaci√≥n cuando el DOM est√© listo
        (function() {
            function initNav() {
                if (typeof initNavigation === 'function') {
                    initNavigation();
                } else if (typeof generateNavigation === 'function') {
                    const sidebar = document.querySelector('.sidebar nav');
                    if (sidebar) {
                        sidebar.innerHTML = generateNavigation();
                        if (typeof highlightCurrentPage === 'function') {
                            highlightCurrentPage();
                        }
                    }
                }
            }
            
            // Esperar a que todos los scripts est√©n cargados
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    setTimeout(initNav, 200);
                });
            } else {
                // DOM ya est√° listo, pero esperar un poco para asegurar que Alpine.js est√© listo
                setTimeout(initNav, 200);
            }
        })();
    </script></body>
</html>

